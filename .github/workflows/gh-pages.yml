name: Deploy to GitHub Pages

on:
    workflow_dispatch:

jobs:
    deploy:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout repository
              uses: actions/checkout@v4

            - name: Set up Node.js
              uses: actions/setup-node@v4
              with:
                node-version: '22'

            - name: Install dependencies
              working-directory: frontend
              run: npm install

            - name: Get ready for github
              run: |
                git config --global user.name 'deploy-bot'
                git config --global user.email 'deploy-bot@rapalearning.com'

            - name: Deploy
              working-directory: frontend
              run: |
                npm run build
                npx gh-pages -d build -b gh-pages -r https://x-access-token:${{ secrets.GITHUB_TOKEN }}@github.com/rapalearning/vishnu-parashara.git
